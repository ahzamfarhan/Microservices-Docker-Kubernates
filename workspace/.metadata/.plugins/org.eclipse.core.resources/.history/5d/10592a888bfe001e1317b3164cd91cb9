package com.dailycodebuffer.demo.service;

import org.springframework.stereotype.Service;

import com.dailycodebuffer.demo.entities.TransactionDetails;
import com.dailycodebuffer.demo.models.PaymentRequest;
import com.dailycodebuffer.demo.repositories.TransactionDetailsRepository;

import lombok.AllArgsConstructor;
import lombok.extern.log4j.Log4j2;

@Service
@AllArgsConstructor
@Log4j2
public class PaymentService {
	
	private TransactionDetailsRepository transactionDetailsRepository;
	
	public long doPayment(PaymentRequest paymentRequest) {
		return transactionDetailsRepository.save(convertToEntity(paymentRequest));
	}
	
	private TransactionDetails convertToEntity(PaymentRequest paymentRequest) {
		
		return TransactionDetails
			.builder()
			.amount(paymentRequest.getAmount())
			.orderId(paymentRequest.getOrderId())
			.paymentDate(null)
			.paymentMode(paymentRequest.getPaymentMode().name())
			.paymentStatus(paymentRequest.)
			.referenceNumber(paymentRequest.getReferenceNumber())
			.build();
	}

}
